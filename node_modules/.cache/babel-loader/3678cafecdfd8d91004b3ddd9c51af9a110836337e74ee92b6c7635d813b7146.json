{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createInterceptor = void 0;\nvar strict_event_emitter_1 = require(\"strict-event-emitter\");\nfunction createInterceptor(options) {\n  var observer = new strict_event_emitter_1.StrictEventEmitter();\n  var cleanupFns = [];\n  return {\n    apply: function () {\n      cleanupFns = options.modules.map(function (interceptor) {\n        return interceptor(observer, options.resolver);\n      });\n    },\n    on: function (event, listener) {\n      observer.addListener(event, listener);\n    },\n    restore: function () {\n      observer.removeAllListeners();\n      if (cleanupFns.length === 0) {\n        throw new Error(\"Failed to restore patched modules: no patches found. Did you forget to run \\\".apply()\\\"?\");\n      }\n      cleanupFns.forEach(function (restore) {\n        return restore();\n      });\n    }\n  };\n}\nexports.createInterceptor = createInterceptor;","map":{"version":3,"mappings":";;;;;;AAEA;AAwEA,SAAgBA,iBAAiBA,CAACC,OAA2B;EAC3D,IAAMC,QAAQ,GAAG,IAAIC,yCAAkB,EAAwB;EAC/D,IAAIC,UAAU,GAA2B,EAAE;EAE3C,OAAO;IACLC,KAAK;MACHD,UAAU,GAAGH,OAAO,CAACK,OAAO,CAACC,GAAG,CAAC,UAACC,WAAW;QAC3C,OAAOA,WAAW,CAACN,QAAQ,EAAED,OAAO,CAACQ,QAAQ,CAAC;MAChD,CAAC,CAAC;IACJ,CAAC;IACDC,EAAE,YAACC,KAAK,EAAEC,QAAQ;MAChBV,QAAQ,CAACW,WAAW,CAACF,KAAK,EAAEC,QAAQ,CAAC;IACvC,CAAC;IACDE,OAAO;MACLZ,QAAQ,CAACa,kBAAkB,EAAE;MAE7B,IAAIX,UAAU,CAACY,MAAM,KAAK,CAAC,EAAE;QAC3B,MAAM,IAAIC,KAAK,CACb,0FAAwF,CACzF;;MAGHb,UAAU,CAACc,OAAO,CAAC,UAACJ,OAAO;QAAK,cAAO,EAAE;MAAT,CAAS,CAAC;IAC5C;GACD;AACH;AAzBAK","names":["createInterceptor","options","observer","strict_event_emitter_1","cleanupFns","apply","modules","map","interceptor","resolver","on","event","listener","addListener","restore","removeAllListeners","length","Error","forEach","exports"],"sources":["C:\\Users\\elif\\Documents\\React\\FSWeb-S6-Challenge\\node_modules\\@mswjs\\interceptors\\src\\createInterceptor.ts"],"sourcesContent":["import { IncomingMessage } from 'http'\nimport { HeadersObject, Headers } from 'headers-polyfill'\nimport { StrictEventEmitter } from 'strict-event-emitter'\n\nexport type Interceptor = (\n  observer: Observer,\n  resolver: Resolver\n) => InterceptorCleanupFn\n\nexport type Observer = StrictEventEmitter<InterceptorEventsMap>\n\n/**\n * A side-effect function to restore all the patched modules.\n */\nexport type InterceptorCleanupFn = () => void\n\nexport type RequestCredentials = 'omit' | 'include' | 'same-origin'\n\nexport interface IsomorphicRequest {\n  id: string\n  url: URL\n  method: string\n  headers: Headers\n  /**\n   * The value of the request client's \"credentials\" option\n   * or a compatible alternative (i.e. `withCredentials` for `XMLHttpRequest`).\n   * Always equals to \"omit\" in Node.js.\n   */\n  credentials: RequestCredentials\n  body?: string\n}\n\nexport interface IsomorphicResponse {\n  status: number\n  statusText: string\n  headers: Headers\n  body?: string\n}\n\nexport interface MockedResponse\n  extends Omit<Partial<IsomorphicResponse>, 'headers'> {\n  headers?: HeadersObject\n}\n\nexport interface InterceptorEventsMap {\n  request(request: IsomorphicRequest): void\n  response(request: IsomorphicRequest, response: IsomorphicResponse): void\n}\n\nexport type Resolver = (\n  request: IsomorphicRequest,\n  ref: IncomingMessage | XMLHttpRequest | Request\n) => MockedResponse | Promise<MockedResponse | void> | void\n\nexport interface InterceptorOptions {\n  modules: Interceptor[]\n  resolver: Resolver\n}\n\nexport interface InterceptorApi {\n  /**\n   * Apply necessary module patches to provision the interception of requests.\n   */\n  apply(): void\n  on<Event extends keyof InterceptorEventsMap>(\n    event: Event,\n    listener: InterceptorEventsMap[Event]\n  ): void\n  /**\n   * Restore all applied module patches and disable the interception.\n   */\n  restore(): void\n}\n\nexport function createInterceptor(options: InterceptorOptions): InterceptorApi {\n  const observer = new StrictEventEmitter<InterceptorEventsMap>()\n  let cleanupFns: InterceptorCleanupFn[] = []\n\n  return {\n    apply() {\n      cleanupFns = options.modules.map((interceptor) => {\n        return interceptor(observer, options.resolver)\n      })\n    },\n    on(event, listener) {\n      observer.addListener(event, listener)\n    },\n    restore() {\n      observer.removeAllListeners()\n\n      if (cleanupFns.length === 0) {\n        throw new Error(\n          `Failed to restore patched modules: no patches found. Did you forget to run \".apply()\"?`\n        )\n      }\n\n      cleanupFns.forEach((restore) => restore())\n    },\n  }\n}\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}